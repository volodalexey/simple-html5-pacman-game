(()=>{"use strict";var e,t={7279:(e,t,i)=>{i.r(t)},2118:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Boundary=void 0;const o=i(8687);class s extends o.Sprite{constructor({code:e,initX:t,initY:i,texture:o}){super(o),this.code=e,this.position.set(t,i)}getMyBounds(){return{top:this.y,right:this.x+this.width,bottom:this.y+this.height,left:this.x}}}t.Boundary=s},2186:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Collision=void 0;const o=i(5473);t.Collision=class{static checkCollisionMBxB({bounds:e,velocity:t},i){return(0,o.logPlayerVelocity)(`collision vx=${t.vx} vy=${t.vy}`),(0,o.logCollision)(`${e.top+t.vy} <= ${i.bottom} [${e.top+t.vy<=i.bottom}]\n    ${e.right+t.vx} >= ${i.left} [${e.right+t.vx>=i.left}]\n    ${e.bottom+t.vy} >= ${i.top} [${e.bottom+t.vy>=i.top}]\n    ${e.left+t.vx} <= ${i.right} [${e.left+t.vx<=i.right}]`),e.top+t.vy<=i.bottom&&e.right+t.vx>=i.left&&e.bottom+t.vy>=i.top&&e.left+t.vx<=i.right}}},4580:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Ghost=void 0;const o=i(8687);class s extends o.AnimatedSprite{static prepareTextures({app:e}){const{texturesCache:t,options:{renderRadius:i}}=s,r=i,n=.1,a=[];for(let t=1;t<11;t++){const i=new o.Graphics;i.beginFill(16777215);const s=r,l=r;i.moveTo(s,l),i.arc(s,l,r,Math.PI/2-n*t,Math.PI/2+n*t),i.lineTo(s,l),i.moveTo(s,l),i.arc(s,l,r,-Math.PI/2-n*t,-Math.PI/2+n*t),i.lineTo(s,l),i.endFill(),a.push(e.renderer.generateTexture(i,{region:new o.Rectangle(0,0,2*r,2*r)}))}t.push(...a),t.push(...a.reverse())}constructor(e){s.texturesCache.length<=0&&s.prepareTextures(e),super(s.texturesCache),this.isScared=!1,this.prevCollisions=[],this.velocity={vx:s.options.moveSpeed,vy:0},this.anchor.set(.5,.5),this.scale.set(s.options.radius/s.options.renderRadius),this.position.set(e.centerX,e.centerY),this.tint=e.fillColor,this.fillColor=e.fillColor,this.animationSpeed=s.options.animationSpeed,this.play()}getPaddingBounds(e=0){const t=this.x,i=this.y,{radius:o}=s.options;return{left:t-o-e,right:t+o+e,top:i-o-e,bottom:i+o+e}}updatePosition(){this.position.x+=this.velocity.vx,this.position.y+=this.velocity.vy}setIsScared(e){this.isScared=e,this.tint=s.options.scaredFillColor,setTimeout((()=>{this.isScared=!1,this.tint=this.fillColor}),5e3)}}s.texturesCache=[],s.options={radius:15,renderRadius:100,moveSpeed:2,animationSpeed:1,scaredFillColor:255},t.Ghost=s},1557:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LoaderScene=t.manifest=void 0;const o=i(8687),s=i(5473);t.manifest={bundles:[{name:"bundle-1",assets:{spritesheet:"assets/spritesheets/spritesheet.json"}}]};class r extends o.Container{constructor(e){super(),this.downloadProgress=e=>{this.loaderBarFill.width=(r.barOptions.width-2*r.barOptions.borderThick)*e},this.setup(),this.draw()}setup(){const e=new o.Graphics;this.addChild(e),this.loaderBarBorder=e;const t=new o.Graphics;this.addChild(t),this.loaderBarFill=t}draw(){const{barOptions:e}=r,{loaderBarFill:t,loaderBarBorder:i}=this;i.beginFill(e.borderColor),i.drawRoundedRect(0,0,e.width,e.height,e.borderRadius),i.endFill(),t.beginFill(e.fillColor),t.drawRoundedRect(e.borderThick,e.borderThick,e.width-2*e.borderThick,e.height-2*e.borderThick,e.borderRadius),t.endFill()}async initializeLoader(){await o.Assets.init({manifest:t.manifest}),await o.Assets.loadBundle(t.manifest.bundles.map((e=>e.name)),this.downloadProgress)}getAssets(){return{spritesheet:o.Assets.get("spritesheet")}}handleResize({viewWidth:e,viewHeight:t}){const i=e,o=t,n=this.width,a=this.height;if(i>=n&&o>=a){const e=i>n?(i-n)/2:0,t=o>a?(o-a)/2:0;(0,s.logLayout)(`Spacing aw=${i} tw=${n} ah=${o} th=${a}`),this.x=e,this.width=r.barOptions.width,this.y=t,this.height=r.barOptions.height}else{let e=1;a>=n?(e=o/a,e*n>i&&(e=i/n),(0,s.logLayout)(`By height (sc=${e})`)):(e=i/n,(0,s.logLayout)(`By width (sc=${e})`),e*a>o&&(e=o/a));const t=Math.floor(n*e),r=Math.floor(a*e),l=i>t?(i-t)/2:0,h=o>r?(o-r)/2:0;(0,s.logLayout)(`aw=${i} (ow=${t}) ah=${o} (oh=${r})`),this.x=l,this.width=t,this.y=h,this.height=r}(0,s.logLayout)(`x=${this.x} y=${this.y} w=${this.width} h=${this.height}`)}handleMounted(){}handleUpdate(){}}r.barOptions={width:350,height:40,fillColor:1588688,borderRadius:5,borderThick:5,borderColor:0},t.LoaderScene=r},6168:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MainScene=void 0;const o=i(8687),s=i(6550),r=i(4778),n=i(5473),a=i(6879),l=i(5617),h=i(5386),p=i(4580),c=i(9588),d=i(2186),u=i(8593);class y extends o.Container{constructor(e){super(),this.gameEnded=!1,this.backgroundSettings={color:0},this.ghosts=[],this.handlePointerDown=e=>{this.handlePlayerMove(!0,e)},this.handlePointerMove=e=>{this.handlePlayerMove(void 0,e)},this.handlePointerUp=e=>{this.handlePlayerMove(!1,e)},this.handleKeyDown=e=>{switch((0,n.logKeydown)(`${e.code} ${e.key}`),e.code){case"KeyW":case"ArrowUp":this.player.applyTopDirection(!0);break;case"KeyA":case"ArrowLeft":this.player.applyLeftDirection(!0);break;case"KeyD":case"ArrowRight":this.player.applyRightDirection(!0);break;case"KeyS":case"ArrowDown":this.player.applyBottomDirection(!0)}},this.handleKeyUp=e=>{switch((0,n.logKeyup)(`${e.code} ${e.key}`),e.code){case"KeyW":case"ArrowUp":this.player.applyTopDirection(!1);break;case"KeyA":case"ArrowLeft":this.player.applyLeftDirection(!1);break;case"KeyD":case"ArrowRight":this.player.applyRightDirection(!1);break;case"KeyS":case"ArrowDown":this.player.applyBottomDirection(!1)}},this.startGame=()=>{this.startModal.visible=!1,this.scoreBar.clearScore(),this.map.restart(),this.setupGhosts(),this.player.restart(),this.gameEnded=!1},this.app=e.app,this.setup(e),this.addEventLesteners()}setup({textures:e}){this.background=new o.Graphics,this.addChild(this.background),this.scoreBar=new s.ScoreBar,this.addChild(this.scoreBar),this.map=new l.Map({app:this.app,textures:e}),this.map.position.set(this.scoreBar.x,this.scoreBar.y+this.scoreBar.height+2*s.ScoreBar.options.padding),this.addChild(this.map),this.drawBackground(),this.player=new r.Player({app:this.app,centerX:l.Map.cell+l.Map.cell/2,centerY:l.Map.cell+l.Map.cell/2}),this.map.addChild(this.player),this.setupGhosts(),this.startModal=new a.StartModal({viewWidth:this.background.width,viewHeight:this.background.height}),this.startModal.visible=!1,this.addChild(this.startModal)}setupGhosts(){for(const e of this.ghosts)e.removeFromParent();this.ghosts=[],this.ghosts.push(new p.Ghost({app:this.app,centerX:6*l.Map.cell+l.Map.cell/2,centerY:l.Map.cell+l.Map.cell/2,fillColor:12730636})),this.ghosts.push(new p.Ghost({app:this.app,centerX:6*l.Map.cell+l.Map.cell/2,centerY:3*l.Map.cell+l.Map.cell/2,fillColor:14362487})),this.ghosts.forEach((e=>this.map.addChild(e)))}drawBackground(){const{background:e,scoreBar:t,map:i}=this;e.beginFill(this.backgroundSettings.color),e.drawRect(0,0,i.width,t.height+s.ScoreBar.options.padding+i.height),e.endFill()}handleResize(e){this.resizeBackground(e),this.centerModal()}centerModal(){this.startModal.position.set(this.background.width/2-this.startModal.boxOptions.width/2,this.background.height/2-this.startModal.boxOptions.height/2)}resizeBackground({viewWidth:e,viewHeight:t}){const i=e,o=t,s=this.background.width,r=this.background.height;let a=1;r>=s?(a=o/r,a*s>i&&(a=i/s),(0,n.logLayout)(`By height (sc=${a})`)):(a=i/s,(0,n.logLayout)(`By width (sc=${a})`),a*r>o&&(a=o/r));const l=Math.floor(s*a),h=Math.floor(r*a),p=i>l?(i-l)/2:0,c=o>h?(o-h)/2:0;(0,n.logLayout)(`aw=${i} (ow=${l}) x=${p} ah=${o} (oh=${h}) y=${c}`),this.x=p,this.width=l,this.y=c,this.height=h,(0,n.logLayout)(`x=${p} y=${c} w=${this.width} h=${this.height}`)}handleUpdate(){if(this.gameEnded)return;const e=(l.Map.cell-2*r.Player.options.radius)/2-1;null!==this.player.pointerYDown&&"top"===this.player.lastPointerDirection?this.player.checkIfMoveUp(this.map.boundaries,e):null!==this.player.pointerYDown&&"bottom"===this.player.lastPointerDirection?this.player.checkIfMoveDown(this.map.boundaries,e):null!==this.player.pointerXDown&&"left"===this.player.lastPointerDirection?this.player.checkIfMoveLeft(this.map.boundaries,e):null!==this.player.pointerXDown&&"right"===this.player.lastPointerDirection&&this.player.checkIfMoveRight(this.map.boundaries,e);for(let e=this.ghosts.length-1;e>=0;e--){const t=this.ghosts[e];if(Math.hypot(t.x-this.player.x,t.y-this.player.y)<p.Ghost.options.radius+r.Player.options.radius){if(!t.isScared)return void this.endGame();this.ghosts.splice(e,1),t.removeFromParent()}}if(0!==this.map.pellets.length){for(let e=this.map.powerUps.length-1;e>=0;e--){const t=this.map.powerUps[e];Math.hypot(t.x-this.player.x,t.y-this.player.y)<c.PowerUp.options.radius+r.Player.options.radius&&(this.map.powerUps.splice(e,1),t.removeFromParent(),this.ghosts.forEach((e=>{e.setIsScared(!0)})))}for(let e=this.map.pellets.length-1;e>=0;e--){const t=this.map.pellets[e];Math.hypot(t.position.x-this.player.x,t.position.y-this.player.y)<h.Pellet.options.radius+r.Player.options.radius&&(this.map.pellets.splice(e,1),t.removeFromParent(),this.scoreBar.addScore(10))}this.player.checkIfMove({vx:this.player.velocity.vx,vy:this.player.velocity.vy,boundaries:this.map.boundaries,padding:e})&&(0,n.logPlayerCheck)("Full stop"),this.player.updatePosition(),this.player.updateState(),this.calcGhostsMovement()}else this.endGame()}addEventLesteners(){this.interactive=!0,this.on("pointerdown",this.handlePointerDown),this.on("pointermove",this.handlePointerMove),this.on("pointerup",this.handlePointerUp),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),this.startModal.on("click",this.startGame)}handlePlayerMove(e,t){const i=this.map.toLocal(t.global);(0,n.logPointerEvent)(`${t.type} px=${i.x} py=${i.y}`),this.player.applyPointerToDirection(e,i.x,i.y)}endGame(){this.gameEnded=!0,this.startModal.scoreText.text=this.scoreBar.score,this.startModal.visible=!0}beginEndGame(){this.player.setKilled(),this.endGame()}calcGhostsMovement(){const e=(l.Map.cell-2*p.Ghost.options.radius)/2-1;this.ghosts.forEach((t=>{t.updatePosition();const i=[],o=t.getPaddingBounds(e);if(this.map.boundaries.forEach((e=>{const t=e.getMyBounds();!i.includes("right")&&d.Collision.checkCollisionMBxB({bounds:o,velocity:{vx:p.Ghost.options.moveSpeed,vy:0}},t)&&i.push("right"),!i.includes("left")&&d.Collision.checkCollisionMBxB({bounds:o,velocity:{vx:-p.Ghost.options.moveSpeed,vy:0}},t)&&i.push("left"),!i.includes("up")&&d.Collision.checkCollisionMBxB({bounds:o,velocity:{vx:0,vy:-p.Ghost.options.moveSpeed}},t)&&i.push("up"),!i.includes("down")&&d.Collision.checkCollisionMBxB({bounds:o,velocity:{vx:0,vy:p.Ghost.options.moveSpeed}},t)&&i.push("down")})),i.length>t.prevCollisions.length&&(t.prevCollisions=i),!(0,u.compareArrays)(i,t.prevCollisions)){t.velocity.vx>0?t.prevCollisions.push("right"):t.velocity.vx<0?t.prevCollisions.push("left"):t.velocity.vy<0?t.prevCollisions.push("up"):t.velocity.vy>0&&t.prevCollisions.push("down");const e=t.prevCollisions.filter((e=>!i.includes(e)));switch(e[Math.floor(Math.random()*e.length)]){case"down":t.velocity.vy=p.Ghost.options.moveSpeed,t.velocity.vx=0;break;case"up":t.velocity.vy=-p.Ghost.options.moveSpeed,t.velocity.vx=0;break;case"right":t.velocity.vy=0,t.velocity.vx=p.Ghost.options.moveSpeed;break;case"left":t.velocity.vy=0,t.velocity.vx=-p.Ghost.options.moveSpeed}t.prevCollisions=[]}}))}}t.MainScene=y},5617:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Map=void 0;const o=i(8687),s=i(2118),r=i(5386),n=i(9588),a=[["╔","═","═","═","═","═","═","═","═","═","╗"],["║"," ",".",".",".",".",".",".",".",".","║"],["║",".","■",".","[","╦","]",".","■",".","║"],["║",".",".",".",".","_",".",".",".",".","║"],["║",".","[","]",".",".",".","[","]",".","║"],["║",".",".",".",".","^",".",".",".",".","║"],["║",".","■",".","[","╬","]",".","■",".","║"],["║",".",".",".",".","_",".",".",".",".","║"],["║",".","[","]",".",".",".","[","]",".","║"],["║",".",".",".",".","^",".",".",".",".","║"],["║",".","■",".","[","╩","]",".","■",".","║"],["║",".",".",".",".",".",".",".",".","P","║"],["╚","═","═","═","═","═","═","═","═","═","╝"]];class l extends o.Container{constructor(e){super(),this.boundaries=[],this.pellets=[],this.powerUps=[],this.app=e.app,this.textures=e.textures,this.setup()}setup(){const{boundaries:e,pellets:t,powerUps:i,app:o,textures:{pipeHorizontalTexture:h,pipeVerticalTexture:p,pipeCornerTopLeftTexture:c,pipeCornerTopRightTexture:d,pipeCornerBottomLeftTexture:u,pipeCornerBottomRightTexture:y,blockTexture:v,capLeftTexture:g,capRightTexture:w,capTopTexture:x,capBottomTexture:f,pipeCrossTexture:b,pipeConnectorTopTexture:m,pipeConnectorBottomTexture:P,pipeConnectorLeftTexture:C,pipeConnectorRightTexture:S}}=this;a.forEach(((a,M)=>{a.forEach(((a,T)=>{const D=l.cell*T,B=l.cell*M,k=D+l.cell/2,$=B+l.cell/2;switch(a){case"═":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:h}));break;case"║":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:p}));break;case"╔":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:c}));break;case"╗":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:d}));break;case"╝":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:y}));break;case"╚":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:u}));break;case"■":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:v}));break;case"[":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:g}));break;case"]":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:w}));break;case"_":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:f}));break;case"^":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:x}));break;case"╬":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:b}));break;case"╩":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:m}));break;case"╠":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:S}));break;case"╦":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:P}));break;case"╣":e.push(new s.Boundary({code:a,initX:D,initY:B,texture:C}));break;case".":t.push(new r.Pellet({app:o,centerX:k,centerY:$}));break;case"P":i.push(new n.PowerUp({app:o,centerX:k,centerY:$}))}}))})),e.forEach((e=>this.addChild(e))),t.forEach((e=>this.addChild(e))),i.forEach((e=>this.addChild(e)))}cleanFromAll(){for(const e of this.boundaries)e.removeFromParent();this.boundaries=[];for(const e of this.pellets)e.removeFromParent();this.pellets=[];for(const e of this.powerUps)e.removeFromParent();this.powerUps=[]}restart(){this.cleanFromAll(),this.setup()}}l.cell=40,t.Map=l},5386:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Pellet=void 0;const o=i(8687);class s extends o.Sprite{constructor(e){super(),this.setup(e),this.anchor.set(.5,.5),this.position.set(e.centerX,e.centerY)}setup(e){const{radius:t,fillColor:i}=s.options;let r=s.textureCache;if(null==r){const i=new o.Graphics;i.beginFill(16777215),i.drawCircle(0,0,t),i.endFill(),i.cacheAsBitmap=!0,r=e.app.renderer.generateTexture(i),s.textureCache=r}this.texture=r,this.scale.set(2*t/r.width,2*t/r.height),this.tint=i}}s.options={radius:3,fillColor:16498468},t.Pellet=s},4778:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Player=t.PlayerState=void 0;const o=i(8687),s=i(2186),r=i(5473);var n;!function(e){e.top="top",e.right="right",e.bottom="bottom",e.left="left"}(n=t.PlayerState||(t.PlayerState={}));class a extends o.AnimatedSprite{static prepareTextures({app:e}){const{texturesCache:t,options:{renderRadius:i}}=a,s=i;t.push(e.renderer.generateTexture((new o.Graphics).beginFill(16777215).drawCircle(s/2,s/2,s)));const r=[];for(let t=1;t<11;t++){const i=new o.Graphics;i.beginFill(16777215);const n=s,a=s;i.moveTo(n,a),i.arc(n,a,s,.1*t,-.1*t),i.lineTo(n,a),i.endFill(),r.push(e.renderer.generateTexture(i,{region:new o.Rectangle(0,0,2*s,2*s)}))}t.push(...r),t.push(...r.reverse())}constructor(e){a.prepareTextures(e),super(a.texturesCache),this.pointerXDown=null,this.pointerYDown=null,this.lastPointerDirection="right",this.velocity={vx:0,vy:0},this.anchor.set(.5,.5),this.scale.set(a.options.radius/a.options.renderRadius),this.initX=e.centerX,this.initY=e.centerY,this.position.set(e.centerX,e.centerY),this.tint=a.options.fillColor,this.animationSpeed=a.options.animationSpeed,this.play(),this.switchState(n.right)}switchState(e){switch(e){case n.top:this.rotation=-Math.PI/2;break;case n.left:this.rotation=-Math.PI;break;case n.right:this.rotation=0;break;case n.bottom:this.rotation=Math.PI/2}this.state=e}isPointerDown(){return null!==this.pointerXDown||null!==this.pointerYDown}applyTopDirection(e){this.pointerYDown=e?-1:null,e&&(this.lastPointerDirection="top"),(0,r.logPlayerDirection)(`Apply direction "${this.lastPointerDirection}" px=${this.pointerXDown} py=${this.pointerYDown}`)}applyBottomDirection(e){this.pointerYDown=e?1:null,e&&(this.lastPointerDirection="bottom"),(0,r.logPlayerDirection)(`Apply direction "${this.lastPointerDirection}" px=${this.pointerXDown} py=${this.pointerYDown}`)}applyLeftDirection(e){this.pointerXDown=e?-1:null,e&&(this.lastPointerDirection="left"),(0,r.logPlayerDirection)(`Apply direction "${this.lastPointerDirection}" px=${this.pointerXDown} py=${this.pointerYDown}`)}applyRightDirection(e){this.pointerXDown=e?1:null,e&&(this.lastPointerDirection="right"),(0,r.logPlayerDirection)(`Apply direction "${this.lastPointerDirection}" px=${this.pointerXDown} py=${this.pointerYDown}`)}applyPointerToDirection(e,t,i){if(!0===e||void 0===e&&this.isPointerDown()){const e=this.getPaddingBounds(),o=this.x,s=this.y,n=Math.abs(t-o),a=Math.abs(i-s);t>=e.left&&t<=e.right?(this.pointerXDown=null,i>s?(this.pointerYDown=1,this.lastPointerDirection="bottom"):(this.pointerYDown=-1,this.lastPointerDirection="top")):i>=e.top&&i<=e.bottom?(this.pointerYDown=null,t>o?(this.pointerXDown=1,this.lastPointerDirection="right"):(this.pointerXDown=-1,this.lastPointerDirection="left")):n>=a?t>e.right?(this.pointerXDown=1,this.lastPointerDirection="right"):t<e.left&&(this.pointerXDown=-1,this.lastPointerDirection="left"):i>e.bottom?(this.pointerYDown=1,this.lastPointerDirection="bottom"):i<e.top&&(this.pointerYDown=-1,this.lastPointerDirection="top"),this.isPointerDown()?(0,r.logPlayerDirection)(`Move px=${this.pointerXDown} py=${this.pointerYDown} at x=${t} y=${i}`):(0,r.logPlayerDirection)(`Down px=${this.pointerXDown} py=${this.pointerYDown} at x=${t} y=${i}`)}else!1===e&&(this.pointerXDown=null,this.pointerYDown=null,(0,r.logPlayerDirection)("Released"))}updateVelocity(){const{options:{moveSpeed:e}}=a,{pointerXDown:t,pointerYDown:i,velocity:o}=this;"number"==typeof i&&((0,r.logPlayerVelocity)(`before vy=${o.vy}`),i<0?o.vy=-e:i>0&&(o.vy=e),(0,r.logPlayerVelocity)(`after vy=${o.vy}`)),"number"==typeof t&&((0,r.logPlayerVelocity)(`before vx=${o.vx}`),t<0?o.vx=-e:t>0&&(o.vx=e),(0,r.logPlayerVelocity)(`after vx=${o.vx}`))}updateState(){this.velocity.vx>0?this.switchState(n.right):this.velocity.vx<0?this.switchState(n.left):this.velocity.vy>0?this.switchState(n.bottom):this.velocity.vy<0&&this.switchState(n.top)}setKilled(){this.pointerXDown=null,this.pointerYDown=null,this.velocity.vx=0,this.velocity.vy=0}getPaddingBounds(e=0){const t=this.x,i=this.y,{radius:o}=a.options;return{left:t-o-e,right:t+o+e,top:i-o-e,bottom:i+o+e}}checkIfMove({vx:e=null,vy:t=null,boundaries:i,padding:o=0}){const n=this.getPaddingBounds(o),a=i.findIndex((i=>{const o=i.getMyBounds();return s.Collision.checkCollisionMBxB({bounds:n,velocity:{vx:null!=e?e:0,vy:null!=t?t:0}},o)}));if(a>-1){const s=i[a];(0,r.logPlayerCheck)(`Collide vx=${e} vy=${t}`);const l=s.getMyBounds();return(0,r.logPlayerCheck)(`Player my bounds t=${n.top} r=${n.right} b=${n.bottom} l=${n.left} pad=${o}`),(0,r.logPlayerCheck)(`Boundary my bounds t=${l.top} r=${l.right} b=${l.bottom} l=${l.left} pad=${o} "${s.code}" i=${a}`),null!=e&&(this.velocity.vx=0),null!=t&&(this.velocity.vy=0),!0}return(0,r.logPlayerCheck)(`No collision detected vx=${e} vy=${t}`),null!=e&&(this.velocity.vx=e),null!=t&&(this.velocity.vy=t),!1}checkIfMoveUp(e,t=0){this.checkIfMove({vy:-a.options.moveSpeed,boundaries:e,padding:t})}checkIfMoveLeft(e,t=0){this.checkIfMove({vx:-a.options.moveSpeed,boundaries:e,padding:t})}checkIfMoveDown(e,t=0){this.checkIfMove({vy:a.options.moveSpeed,boundaries:e,padding:t})}checkIfMoveRight(e,t=0){this.checkIfMove({vx:a.options.moveSpeed,boundaries:e,padding:t})}updatePosition(){0===this.velocity.vx&&0===this.velocity.vy||(0,r.logPlayerPosition)(`Before posX=${this.position.x} vx=${this.velocity.vx} posY=${this.position.y} vy=${this.velocity.vy}`),this.position.x+=this.velocity.vx,this.position.y+=this.velocity.vy,0===this.velocity.vx&&0===this.velocity.vy||(0,r.logPlayerPosition)(`After posX=${this.position.x} vx=${this.velocity.vx} posY=${this.position.y} vy=${this.velocity.vy}`)}restart(){this.position.set(this.initX,this.initY),this.velocity.vx=this.velocity.vy=0,this.pointerXDown=null,this.pointerYDown=null}}a.texturesCache=[],a.options={radius:15,renderRadius:100,moveSpeed:5,fillColor:12513892,animationSpeed:1},t.Player=a},9588:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PowerUp=void 0;const o=i(8687);class s extends o.Sprite{constructor(e){super(),this.setup(e),this.anchor.set(.5,.5),this.position.set(e.centerX,e.centerY)}setup(e){const{radius:t,fillColor:i}=s.options;let r=s.textureCache;if(null==r){const i=new o.Graphics;i.beginFill(16777215),i.drawCircle(0,0,t),i.endFill(),i.cacheAsBitmap=!0,r=e.app.renderer.generateTexture(i),s.textureCache=r}this.texture=r,this.scale.set(2*t/r.width,2*t/r.height),this.tint=i}}s.options={radius:8,fillColor:16478597},t.PowerUp=s},3110:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SceneManager=void 0;const o=i(8687),s=i(5473);class r extends o.Container{handleUpdate(){}handleResize(){}}class n{constructor(){}static get width(){return window.innerWidth}static get height(){return window.innerHeight}static async initialize(){var e;const t=new o.Application({autoDensity:!0,resolution:null!==(e=window.devicePixelRatio)&&void 0!==e?e:1,width:n.width,height:n.height,resizeTo:window});document.body.appendChild(t.view),s.logApp.enabled&&((0,s.logApp)("window.app initialized!"),window.app=t),n.app=t,n.setupEventLesteners()}static setupEventLesteners(){window.addEventListener("resize",n.resizeDeBounce),n.app.ticker.add(n.updateHandler)}static async changeScene(e){n.app.stage.removeChild(n.currentScene),n.currentScene.destroy(),n.currentScene=e,n.app.stage.addChild(n.currentScene),n.resizeHandler()}static resizeDeBounce(){n.cancelScheduledResizeHandler(),n.scheduleResizeHandler()}static cancelScheduledResizeHandler(){clearTimeout(n.resizeTimeoutId)}static scheduleResizeHandler(){n.resizeTimeoutId=setTimeout((()=>{n.cancelScheduledResizeHandler(),n.resizeHandler()}),n.resizeTimeout)}static resizeHandler(){n.currentScene.handleResize({viewWidth:n.width,viewHeight:n.height})}static updateHandler(){n.currentScene.handleUpdate(n.app.ticker.deltaMS)}}n.currentScene=new r,n.resizeTimeout=300,t.SceneManager=n},6550:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScoreBar=void 0;const o=i(8687);class s extends o.Container{constructor(){super(),this._score=0,this.setup()}get score(){return this._score}setup(){const{options:e}=s,t=new o.Text(`Score: ${this._score}`,{fontSize:e.textSize,fill:e.textColor});t.position.set(e.padding,e.padding),this.addChild(t),this.scoreText=t}addScore(e){this._score+=Math.round(e),this.scoreText.text=`Score: ${this._score}`}subScore(){this._score-=10,this.scoreText.text=`Score: ${this._score}`}clearScore(){this._score=0,this.scoreText.text=`Score: ${this._score}`}}s.options={padding:20,textColor:16777215,textSize:20},t.ScoreBar=s},6879:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StartModal=void 0;const o=i(8687);class s extends o.Container{constructor(e){super(),this.boxOptions={fill:16777215,width:300,height:200,borderRadius:5},this.scoreOptions={top:-50,textColor:0,textSize:40,fontWeight:"bold"},this.pointsOptions={top:-10,textColor:0,textSize:20},this.buttonOptions={top:120,left:50,width:200,height:50,fill:959977,borderRadius:10},this.buttonTextOptions={top:95,textColor:16777215,textSize:20},this.setup(e),this.draw(e),this.setupEventListeners()}setup(e){this.modalBox=new o.Graphics,this.addChild(this.modalBox);const{boxOptions:t,scoreOptions:i,pointsOptions:s,buttonTextOptions:r}=this;this.scoreText=new o.Text("0",{fontSize:i.textSize,fill:i.textColor,fontWeight:i.fontWeight}),this.scoreText.anchor.set(.5,.5),this.scoreText.position.set(t.width/2,t.height/2+i.top),this.addChild(this.scoreText),this.pointsText=new o.Text("Score",{fontSize:s.textSize,fill:s.textColor}),this.pointsText.anchor.set(.5,.5),this.pointsText.position.set(t.width/2,t.height/2+s.top),this.addChild(this.pointsText),this.button=new o.Graphics,this.button.interactive=!0,this.button.cursor="pointer",this.addChild(this.button),this.buttonText=new o.Text("Start Game",{fontSize:r.textSize,fill:r.textColor}),this.buttonText.anchor.set(.5,.5),this.buttonText.position.set(t.width/2,t.height/2/2+r.top),this.button.addChild(this.buttonText)}draw(e){const{boxOptions:t,buttonOptions:i}=this;this.modalBox.beginFill(t.fill),this.modalBox.drawRoundedRect(0,0,t.width,t.height,t.borderRadius),this.modalBox.endFill(),this.button.beginFill(i.fill),this.button.drawRoundedRect(i.left,i.top,i.width,i.height,i.borderRadius),this.button.endFill()}setupEventListeners(){this.button.on("pointertap",(e=>{this.emit("click",e)}))}}t.StartModal=s},6752:(e,t,i)=>{i(7279);const o=i(3110),s=i(6168),r=i(1557);(async function(){var e;const t=document.querySelector(".ellipsis");null!=t&&(null===(e=t.parentElement)||void 0===e||e.removeChild(t)),await o.SceneManager.initialize();const i=new r.LoaderScene({viewWidth:o.SceneManager.width,viewHeight:o.SceneManager.height});await o.SceneManager.changeScene(i),await i.initializeLoader();const{spritesheet:{textures:n}}=i.getAssets();await o.SceneManager.changeScene(new s.MainScene({app:o.SceneManager.app,textures:{blockTexture:n["block.png"],capBottomTexture:n["capBottom.png"],capLeftTexture:n["capLeft.png"],capRightTexture:n["capRight.png"],capTopTexture:n["capTop.png"],pipeConnectorBottomTexture:n["pipeConnectorBottom.png"],pipeConnectorLeftTexture:n["pipeConnectorLeft.png"],pipeConnectorRightTexture:n["pipeConnectorRight.png"],pipeConnectorTopTexture:n["pipeConnectorTop.png"],pipeCornerBottomLeftTexture:n["pipeCornerBottomLeft.png"],pipeCornerBottomRightTexture:n["pipeCornerBottomRight.png"],pipeCornerTopLeftTexture:n["pipeCornerTopLeft.png"],pipeCornerTopRightTexture:n["pipeCornerTopRight.png"],pipeCrossTexture:n["pipeCross.png"],pipeHorizontalTexture:n["pipeHorizontal.png"],pipeVerticalTexture:n["pipeVertical.png"]}}))})().catch((e=>{var t;console.error(e);const i=document.querySelector(".error-message");null!=i&&(i.classList.remove("hidden"),i.innerText=Boolean(e)&&Boolean(e.message)?e.message:e);const o=document.querySelector(".error-stack");null!=o&&(o.classList.remove("hidden"),o.innerText=Boolean(e)&&Boolean(e.stack)?e.stack:"");const s=document.querySelector("canvas");null!=s&&(null===(t=s.parentElement)||void 0===t||t.removeChild(s))}))},5473:function(e,t,i){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.logCollision=t.logPlayerPosition=t.logPlayerCheck=t.logPlayerBounds=t.logPlayerVelocity=t.logPlayerDirection=t.logKeyup=t.logKeydown=t.logPointerEvent=t.logLayout=t.logApp=void 0;const s=o(i(1227));t.logApp=(0,s.default)("pacman-app"),t.logLayout=(0,s.default)("pacman-layout"),t.logPointerEvent=(0,s.default)("pacman-pointer-event"),t.logKeydown=(0,s.default)("pacman-keydown"),t.logKeyup=(0,s.default)("pacman-keydup"),t.logPlayerDirection=(0,s.default)("pacman-player-direction"),t.logPlayerVelocity=(0,s.default)("pacman-player-velocity"),t.logPlayerBounds=(0,s.default)("pacman-player-bounds"),t.logPlayerCheck=(0,s.default)("pacman-player-check"),t.logPlayerPosition=(0,s.default)("pacman-player-position"),t.logCollision=(0,s.default)("pacman-collision")},8593:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.compareArrays=void 0,t.compareArrays=function(e,t){if(e.length!==t.length)return!1;e=[...e].sort(),t=[...t].sort();for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}}},i={};function o(e){var s=i[e];if(void 0!==s)return s.exports;var r=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=t,e=[],o.O=(t,i,s,r)=>{if(!i){var n=1/0;for(p=0;p<e.length;p++){for(var[i,s,r]=e[p],a=!0,l=0;l<i.length;l++)(!1&r||n>=r)&&Object.keys(o.O).every((e=>o.O[e](i[l])))?i.splice(l--,1):(a=!1,r<n&&(n=r));if(a){e.splice(p--,1);var h=s();void 0!==h&&(t=h)}}return t}r=r||0;for(var p=e.length;p>0&&e[p-1][2]>r;p--)e[p]=e[p-1];e[p]=[i,s,r]},o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0};o.O.j=t=>0===e[t];var t=(t,i)=>{var s,r,[n,a,l]=i,h=0;if(n.some((t=>0!==e[t]))){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(l)var p=l(o)}for(t&&t(i);h<n.length;h++)r=n[h],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(p)},i=self.webpackChunksimple_html5_pacman_game=self.webpackChunksimple_html5_pacman_game||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var s=o.O(void 0,[736],(()=>o(6752)));s=o.O(s)})();